---
sidebar_position: 1
description: "Find out how to register new deployments with Restate."
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# Registration

After deploying an endpoint, you need to register it with Restate.
That way Restate knows where it runs and can invoke it.

## Registering endpoints

<Tabs groupId="interface" queryString>
<TabItem value="cli" label="CLI">

<CH.Section>

Register [a service endpoint URI](focus://1[30:44]) as follows:

```shell
restate deployments register localhost:9080
```

Or you can use the shorthand _`restate dp add`_.

</CH.Section>

When running Restate in a Docker, replace `localhost` with `host.docker.internal`.

</TabItem>
<TabItem value="curl" label="curl">

<CH.Section>
Register [a service endpoint URI](focus://1[72:99]) with [the Restate Admin API](focus://1[5:19]) as follows:

```bash
curl localhost:9070/deployments -H 'content-type: application/json'
    -d '{"uri": "localhost:9080"}'
```

When running Restate in a Docker, replace `localhost` with `host.docker.internal`.

</CH.Section>
</TabItem>
</Tabs>

<Admonition type="info" title="Updating services">
A service can be registered only once. Subsequent registration requests to the same deployment will fail. For more details on how to update services, check the [versioning documentation](/operate/versioning).
</Admonition>

When developing locally, you can forcefully overwrite an existing deployment:

<Tabs groupId="interface" queryString>
<TabItem value="cli" label="CLI">

```shell
restate dp add --force localhost:9080
```

</TabItem>
<TabItem value="curl" label="curl">

```bash
curl localhost:9070/deployments -H 'content-type: application/json' \
    -d '{"uri": "localhost:9080", "force": true}'
```

</TabItem>
</Tabs>


This will forcefully overwrite the existing service deployment with the same uri, forcing the discovery process again. It will also remove services that were served by that deployment and are not available anymore.

<Admonition type="warning">
Forcing a deployment registration is a feature designed to simplify local Restate service development, and should never be used in a production Restate deployment, as it potentially breaks all the in-flight invocations to that deployment.
</Admonition>

For more details on the API, refer to the [admin API docs](/references/admin-api#tag/deployment/operation/create_deployment).

## Kafka subscriptions

Restate can trigger handlers via Kafka events.
Have a look at the [Java](/develop/java/kafka) and [TypeScript](/develop/ts/kafka) docs to learn how to set up your handler to receive Kafka events.

<CH.Section>
- **Create subscriptions** for [a handler](focus://4) on [a topic](focus://3) via:
    ```bash
    curl localhost:9070/subscriptions -H 'content-type: application/json' \
        -d '{
               "source": "kafka://my-cluster/my-topic",
               "sink": "component://MyService/Handle",
               "options": {"auto.offset.reset": "earliest"}
            }'
    ```
    The [options field](focus://5) is optional and accepts any configuration parameter from [librdkafka configuration](https://github.com/confluentinc/librdkafka/blob/master/CONFIGURATION.md).
</CH.Section>
- **List** the current subscriptions via:
  ```bash
  curl localhost:9070/subscriptions
    ```
    The creation and listing of subscriptions returns an identifier.
<CH.Section>
- **Delete** a subscription with [its identifier](focus://1[45:78]) via:
        ```bash
        curl -X DELETE localhost:9070/subscriptions/018cd978aa9f77b5a80454bc060c2a77
        ```

        <Admonition type="note">
            When you delete a subscription, Restate stops the consumer group associated to it. Any messages that were already enqueued by Restate will still be processed.
        </Admonition>
</CH.Section>