---
sidebar_position: 1
description: "Find out how to register new deployments with Restate."
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# Registration

After deploying a service deployment, in order to use it, it must be registered with Restate as follows:

<Tabs groupId="interface" queryString>
<TabItem value="cli" label="CLI">

```shell
restate deployments register <SERVICE_ENDPOINT_URI>
```

Or you can use the shorthand:

```shell
restate dp add <SERVICE_ENDPOINT_URI>
```

For example when running Restate locally as a binary, via `npx`, or via `Homebrew`:

```bash
restate dp add localhost:9080
```

When running Restate in a Docker container with the `--add-host=host.docker.internal:host-gateway` option, use:

```bash
restate dp add http://host.docker.internal:9080
```


</TabItem>
<TabItem value="curl" label="curl">

```bash
curl <RESTATE_ADMIN_URL>/deployments -H 'content-type: application/json' -d '{"uri": "<SERVICE_ENDPOINT_URI>"}'
```

For example when running Restate locally as a binary, via `npx`, or via `Homebrew`:

```bash
curl localhost:9070/deployments -H 'content-type: application/json' -d '{"uri": "localhost:9080"}'
```

When running Restate in a Docker container with the `--add-host=host.docker.internal:host-gateway` option, use:

```bash
curl localhost:9070/deployments -H 'content-type: application/json' -d '{"uri": "http://host.docker.internal:9080"}'
```

</TabItem>
</Tabs>



When registering a service deployment, Restate uses a mechanism similar to "reflections" to discover the available services and their schemas and properties. A service can be registered only once, and subsequent registration requests to the same deployment will fail. For more details on how to update services, check the [versioning documentation](/operate/versioning).

The deployment creation can be forced to overwrite an existing deployment:

<Tabs groupId="interface" queryString>
<TabItem value="cli" label="CLI">

```shell
restate dp add --force <SERVICE_ENDPOINT_URI>
```

</TabItem>
<TabItem value="curl" label="curl">

```bash
curl <RESTATE_ADMIN_URL>/deployments -H 'content-type: application/json' -d '{"uri": "<SERVICE_ENDPOINT_URI>", "force": true}'
```

</TabItem>
</Tabs>


This will forcefully overwrite the existing service deployment with the same uri, forcing the discovery process again. It will also remove services that were served by that deployment and are not available anymore.

<Admonition type="warning">
Forcing a deployment registration is a feature designed to simplify local Restate service development, and should never be used in a production Restate deployment, as it potentially breaks all the in-flight invocations to that deployment.
</Admonition>

For more details on the API, refer to the [admin API docs](/references/admin-api#tag/deployment/operation/create_deployment).

## Kafka subscriptions

Restate can trigger handlers via Kafka events.
Have a look at the [Java](/develop/java/kafka) and [TypeScript](/develop/ts/kafka) docs to learn how to set up your handler to receive Kafka events.

<CH.Section>
- **Create subscriptions** for [a handler](focus://4) on [a topic](focus://3) via:
    ```bash
    curl localhost:9070/subscriptions -H 'content-type: application/json' \
        -d '{
               "source": "kafka://my-cluster/my-topic",
               "sink": "component://MyService/Handle",
               "options": {"auto.offset.reset": "earliest"}
            }'
    ```
    The [options field](focus://5) is optional and accepts any configuration parameter from [librdkafka configuration](https://github.com/confluentinc/librdkafka/blob/master/CONFIGURATION.md).
</CH.Section>
- **List** the current subscriptions via:
  ```bash
  curl localhost:9070/subscriptions
    ```
    The creation and listing of subscriptions returns an identifier.
<CH.Section>
- **Delete** a subscription with [its identifier](focus://1[45:78]) via:
        ```bash
        curl -X DELETE localhost:9070/subscriptions/018cd978aa9f77b5a80454bc060c2a77
        ```

        <Admonition type="note">
            When you delete a subscription, Restate stops the consumer group associated to it. Any messages that were already enqueued by Restate will still be processed.
        </Admonition>
</CH.Section>