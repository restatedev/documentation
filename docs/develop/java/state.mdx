---
sidebar_position: 4
description: "Explore interacting with Restate's state store."
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# State
You can store key-value state in Restate.
Restate makes sure the state is consistent with the processing of the code execution.

**This feature is only available for Virtual Objects and Workflows:**
- For **Virtual Objects**, the state is isolated per Virtual Object.
- For **Workflows**, you can think of it as if every workflow execution is a new object. So the state is isolated to a single workflow execution.
The state can only be mutated by the `run` handler of the workflow. The other handlers can only read the state.

<Admonition type="info" title="Command-line introspection">
You can inspect and edit the K/V state stored in Restate via `psql` and the CLI.
Have a look at the [introspection docs](/operate/introspection#inspecting-application-state) for more information.
</Admonition>

You can do the following operations on the state:

<Tabs groupId="sdk" queryString>
    <TabItem value="java" label="Java">
    </TabItem>
    <TabItem value="kotlin" label="Kotlin">
    </TabItem>
</Tabs>

### Listing state keys
For a single Virtual Object, you can list all the state keys that have entries in the state store via:
<Tabs groupId="sdk" queryString className={"display-none"}>
<TabItem value="java" label="Java">

```java
CODE_LOAD::java/src/main/java/develop/State.java#<start_statekeys>-<end_statekeys>
```

</TabItem>
<TabItem value="kotlin" label="Kotlin">

```kotlin
CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#<start_statekeys>-<end_statekeys>
```

</TabItem>
</Tabs>

### Retrieving state


<Tabs groupId="sdk" queryString className={"display-none"}>
<TabItem value="java" label="Java">
    <CH.Section>
        ```java
        CODE_LOAD::java/src/main/java/develop/State.java#<start_get>-<end_get>
        ```

        1. [Define the state key](focus://2,6) (key name and [(de)serializer](/develop/java/serialization)) at the top of the Virtual Object class.
        2. [Use `ctx.get` to retrieve the state for a specific key.](focus://3,7)
    </CH.Section>
</TabItem>
<TabItem value="kotlin" label="Kotlin">
    <CH.Section>

        ```kotlin
        CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#<start_get>-<end_get>
        ```
        1. [Define the state key](focus://2,6) (key name and [(de)serializer](/develop/java/serialization)) at the top of the Virtual Object class.
        2. [Use `ctx.get` to retrieve the state for a specific key.](focus://3,7)
    </CH.Section>
</TabItem>
</Tabs>


### Setting state

<Tabs groupId="sdk" queryString className={"display-none"}>
<TabItem value="java" label="Java">
    <CH.Section>
```java
CODE_LOAD::java/src/main/java/develop/State.java#<start_set>-<end_set>
```
        1. [Define the state key](focus://1) (key name and [(de)serializer](/develop/java/serialization)) at the top of the Virtual Object class.
        2. [Use `ctx.set` to set the state for a specific key.](focus://2) The type of value needs to line up with the type that was defined in the StateKey.

    </CH.Section>
</TabItem>
<TabItem value="kotlin" label="Kotlin">
    <CH.Section>
```kotlin
CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#<start_set>-<end_set>
```
        1. [Define the state key](focus://1) (key name and [(de)serializer](/develop/java/serialization)) at the top of the Virtual Object class.
        2. [Use `ctx.set` to set the state for a specific key.](focus://2) The type of value needs to line up with the type that was defined in the StateKey.

    </CH.Section>
</TabItem>
</Tabs>


### Clearing state

<Tabs groupId="sdk" queryString className={"display-none"}>
<TabItem value="java" label="Java">
    <CH.Section>
```java
CODE_LOAD::java/src/main/java/develop/State.java#<start_clear>-<end_clear>
```
    1. [Define the state key](focus://1) (key name and [(de)serializer](/develop/java/serialization)) at the top of the Virtual Object class.
    2. [Use `ctx.clear` to delete the state for a specific key.](focus://2)

</CH.Section>
</TabItem>
<TabItem value="kotlin" label="Kotlin">
    <CH.Section>
```kotlin
CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#<start_clear>-<end_clear>
```
    1. [Define the state key](focus://1) (key name and [(de)serializer](/develop/java/serialization)) at the top of the Virtual Object class.
    2. [Use `ctx.clear` to delete the state for a specific key.](focus://2)

</CH.Section>
</TabItem>
</Tabs>

### Clearing all state
<Tabs groupId="sdk" queryString className={"display-none"}>
<TabItem value="java" label="Java">

```java
CODE_LOAD::java/src/main/java/develop/State.java#<start_clear_all>-<end_clear_all>
```

</TabItem>
<TabItem value="kotlin" label="Kotlin">

```kotlin
CODE_LOAD::kotlin/src/main/kotlin/develop/State.kt#<start_clear_all>-<end_clear_all>
```

</TabItem>
</Tabs>
This will delete all the state stored in Restate for the Virtual Object.