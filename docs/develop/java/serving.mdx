---
sidebar_position: 11
description: "Set up long-running services or Lambda handlers."
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Serving
Restate services can run in two ways: as an HTTP endpoint or as AWS Lambda functions.
## Creating an HTTP endpoint

<Tabs groupId="sdk" queryString>
    <TabItem value="java" label="Java">

        <CH.Section>

            <CH.Code>
                ```java
                CODE_LOAD::java/src/main/java/develop/ServingHttp.java
                ```
            </CH.Code>

            1. [Create a `RestateHttpEndpointBuilder`](focus://5)
            2. [Bind one or multiple services to it](focus://6,7)
            3. [Listen on the specified port (default `9080`) for connections and requests.](focus://8)

        </CH.Section>

</TabItem>
<TabItem value="kotlin" label="Kotlin">
    <CH.Section>

        <CH.Code>
            ```kotlin
            CODE_LOAD::kotlin/src/main/kotlin/develop/ServingHttp.kt
            ```
        </CH.Code>

        1. [Create a `RestateHttpEndpointBuilder`](focus://4)
        2. [Bind one or multiple services to it](focus://5,6)
        3. [Listen on the specified port (default `9080`) for connections and requests.](focus://7)

    </CH.Section>


</TabItem>
</Tabs>


## Creating a Lambda handler
<Tabs groupId="sdk" queryString>
    <TabItem value="java" label="Java">
<CH.Section>
    <CH.Code>
    ```java
    CODE_LOAD::java/src/main/java/develop/ServingLambda.java
    ```
    </CH.Code>

    1. Add the dependency `dev.restate:sdk-lambda:VAR::JAVA_SDK_VERSION`.
    2. [Extend the class `BaseRestateLambdaHandler`](focus://4)
    3. [Override the register method](focus://5:6,10)
    4. [Bind one or multiple services to the builder](focus://7:9)

</CH.Section>
</TabItem>
<TabItem value="kotlin" label="Kotlin">
    <CH.Section>
        <CH.Code>
    ```kotlin
    CODE_LOAD::kotlin/src/main/kotlin/develop/MyLambdaHandler.kt
    ```
        </CH.Code>

    1. Add the dependency `dev.restate:sdk-lambda:VAR::JAVA_SDK_VERSION`.
    2. [Extend the class `BaseRestateLambdaHandler`](focus://4)
    3. [Override the register method](focus://5,9)
    4. [Bind one or multiple services to the builder](focus://6:8)
    </CH.Section>
</TabItem>
</Tabs>

Have a look at the [deployment section](/category/aws--aws-lambda) for guidance on how to deploy your services on AWS Lambda.

<Admonition type="tip" title={"Run on Lambda without handler changes"}>
The implementation of your services and handlers remains the same for both deployment options.
</Admonition>


<details className="grey-details">

    <summary>Using Java 21 Virtual Threads</summary>

If you use a JVM >= 21, you can easily use virtual threads to run your components:

<Tabs groupId="sdk" queryString>
<TabItem value="java" label="Java">

```java
CODE_LOAD::java/src/main/java/develop/ServingVirtualThreads.java
```

</TabItem>
<TabItem value="kotlin" label="Kotlin">

```kotlin
CODE_LOAD::kotlin/src/main/kotlin/develop/ServingVirtualThreads.kt
```

</TabItem>
</Tabs>
</details>
