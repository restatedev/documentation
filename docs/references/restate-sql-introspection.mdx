---
sidebar_position: 3
description: "API reference for inspecting the invocation status and service state."
---

# Restate SQL Introspection API

Restate exposes two tables that can be queried via [psql](https://www.postgresql.org/docs/current/app-psql.html).
The schema of these tables is described in the following.

## Table: `state`

| Column name       | Type   | Description                                                                                                                                                                                                                      | Example                                                                               |
| ----------------- | ------ |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| ------------------------------------------------------------------------------------- |
| `partition_key`     | `UInt32` | Internal column that is used for partitioning the services invocations. Can be ignored.                                                                                                                                          |                                                                                       |
| `service`           | `Utf8`   | The name of the invoked service.                                                                                                                                                                                                  | `foo.bar.Greeter`                                                                       |
| `service_key`       | `Binary` | A binary, uninterpreted representation of the service key. You can use a more specific column based on the type of your key, such as `service_key_utf8` (for string keys), `serivce_key_uuid` for unkeyed services, or `service_key_int32` for integer keys.| |
| `service_key_utf8`  | `Utf8`   | Only contains meaningful values when a service uses a `utf8` Restate key.                                                                                                                                                         | `bob`                                                                                   |
| `service_key_int32` | `Int32`  | Only contains meaningful values when a service uses an `int32` Restate key.                                                                                                                                                       | `1337`                                                                                  |
| `service_key_uuid`  | `Utf8`   | Only contains meaningful values for unkeyed Restate services.                                                                                                                                                                     | `0189bab3b3397d828e979e2548980fa6`                                                      |
| `key`               | `Utf8`   | The `utf8` user-supplied state key.                                                                                                                                                                                               | A snippet like  `ctx.set(“seen”, 1);` Will produce a value like: `seen` |
| `value`             | `Binary` | A binary, uninterpreted representation of the value. You can use the more specific column `value_utf8` if the value is a string. | |
| `value_utf8`        | `Utf8`   | Only contains meaningful values when a service stores state as `utf8`. This is the case for Typescript services since the Typescript SDK serializes values as JSON.                                                              | `1`                                                                                   |

## Table: `sys_status`

| Column name        | Type   | Description                                                                                                                                                                              | Example                                                        |
| ------------------ | ------ |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
| `partition_key`      | `UInt32` | Internal column that is used for partitioning the services invocations. Can be ignored.                                                                                                  |                                                                |
| `service`            | `Utf8`   | The name for the invoked service.                                                                                                                                                         | `foo.bar.Greeter`                                              |
| `method`             | `Utf8`   | The invoked RPC method.                                                                                                                                                                   | `greet`                                                        |
| `service_key`        | `Binary` | A binary, uninterpreted representation of the service key. You can use a more specific column based on the type of your key, such as `service_key_utf8` (for string keys), `serivce_key_uuid` for unkeyed services, or `service_key_int32` for integer keys.| |
| `service_key_utf8`   | `Utf8`   | Only contains meaningful values when a service uses a `utf8` Restate key.                                                                                                                 | `bob`                                                          |
| `service_key_int32`  | `Int32`  | Only contains meaningful values when a service uses an `int32` Restate key.                                                                                                               | `1337`                                                         |
| `service_key_uuid`   | `Utf8`   | Only contains meaningful values for unkeyed Restate services.                                                                                                                             | `0189bab3b3397d828e979e2548980fa6`                             |
| `status`             | `Utf8`   | Enum value: `invoked` or `suspended`.                                                                                                                                                     |                                                                |
| `id`                 | `Utf8`   | [Invocation ID](/services/invocation#invocation-id), an opaque token that can be used to cancel an invocation of a service with the [admin API](/references/admin-api).                   |                                                                |
| `invoked_by`         | `Utf8`   | Enum describing the invoker of this service: `ingress` = invoked externally / `service` = invoked by a service.                                                                           |                                                                |
| `invoked_by_service` | `Utf8`   | The name of the invoking service. Or `null` if invoked via the ingress.                                                                                                                  | `com.example.Greeter`                                            |
| `invoked_by_id`      | `Utf8`   | The Invocation ID of the service that triggered this invocation. Or `null` if invoked externally.                                                                                        |                                                                |
| `trace_id`           | `Utf8`   | The ID of the trace that is assigned to this invocation. Only relevant when tracing is enabled.                                                                                          |                                                                |
| `journal_size`       | `UInt32` | The number of journal entries durably logged for this invocation.                                                                                                                         |                                                                |
| `created_at`         | `Date64` | Timestamp indicating the start of this invocation.                                                                                                                                       |                                                                |
| `modified_at`        | `Date64` | Timestamp indicating the last state transition. For example, last time the status changed from `invoked` to `suspended`.                                                                 |                                                                |
