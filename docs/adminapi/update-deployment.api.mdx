---
id: update-deployment
title: "Update deployment"
description: "Update deployment. Invokes the endpoint and replaces the existing deployment metadata with the discovered information. This is a dangerous operation that should be used only when there are failing invocations on the deployment that cannot be resolved any other way. Sense checks are applied to test that the new deployment is sufficiently similar to the old one."
sidebar_label: "Update deployment"
hide_title: true
hide_table_of_contents: true
api: eJztW19z2zYS/yoYvKTJMFLd9h5Ob26dTn3NxR7b6T2kHgUiViJqEGABUDLHo+9+swBIghLtOG7iu7lTXhxzAewf7C4WP3jvqGMrS2cfKIdK6qYE5eh1RjnY3IjKCa3ojL6vOHNA+iETcqrW+gYscQUQULzSQjnCFCcGKsnylnIrrBNqlUwlJTjGmWNkI1zhR3Fhc70GA5wItdSmZMh3Qq4KYYmwhBHO1AqMri3RFRhPJq5gjthC15KTBZDaAidayYZsCkAqGCDMAFkyIVEEodY691Mt8dNThcJqOVNKO1zNgNVyDZww1RCNi5ENaybkEpQFkheQ31i/OqsqKYATp4kDG9fBtRVs0vWFJbZeLkUuQDnZECtKIZnx8wogWqLwMKEZhVsHRjF5onNLZ3e0NpLOaOFcZWfTKde5nRiwjjmYcFhPg0FgugZjhVZCreg2o52ZTjmd0drv3zzZ4oxWzLASHBjc/TuqWAl0RgdDBO59xVxBdx3iJFGMg3JiKcDQjBr4sxYGOJ05U0NGbV5AyVAL11S4vnXGS7i9DoPBuh81b3BErpVDvrM76o0a9mr6h0WOd8lSTDVnSy90XFQv/oDcDdh/oLUR6MiVQVM4AdGWwgsjnMSJ743YU+29EbgptQX80brmVHh/93uFW5HGAs12tcso41zggkzOC2DcW7nne9xRSUvdFWN/CGGcR0dLYqYVLBrTdvQx+TpD9eKdD+yzp4eqpWQLFBo3dJvR2sIcDTA/OhpY0ga7HE2O9lQ5XZKPOPtj1kndkI2QEgONOQdl5YCT2mKUMpJL0QUkhyWrZdDql6ur86PJERHKOmCc6CVhpDJCm9c3Sm8k8BX4Qd/FJSbxt5I1xLrIz6eJpTbk6u0lsWAwbAIvxtdoCNsuYuuq0saRtWDk+O35u0knQW9bG/QIaUebGyJUuxOvDdhKY7YoNfeBHZWhsyWTFrpNWWgtgSm0NjfN3NQqNeyJaV6bWvlFPsOyOGVRu90s52ldilsJ6zDr9pm2trCsJVrbQnB2UVYsd8HYOyltAUtt+nV8jnWPUXS7zR6OXWbUfuzixzSGLt7tB83Fu0/ErmTlgrNPRq+1dQlzoyXMd9l6EkESGRPhrIpRi7J4q/mhTpOwaDidvERoMJSJcW7Aol++9dJl3v7R+/zsvGDCZ/ZdWUcC9H828/zfBMd11qdVf3D3p+1FsLUPoZ3D1n8IGccb9Ltvv8UfQ5vQ7EnHbJTmF+eqE3BMSOCpTIHrSJEQhqZm6ZIipmDMp2kyHXGXNCvkBpgDPmdI8GdQrHmwVOE0oyW7nVdGO51rmdBKocY+d588z4ziYSByQClGawfBB67X63R6gn4t5bAo6SK0nXEZXft6m+3WIcli7y9O90uSi9NwbjlNulyGBWWQ+FPZbKhowvY8EshVsMCQa0fFaZ/B/35LgKpL3MjoxYnj/Ci4uHQGWEkT728l8OJ5uw12PdHEe9Jv3dYOFUmJf8WOXyOzfrY4n5tIt1kaN2OJdjQ8+oFCOVj54j7czMKn77/zU8cC7nFTu2hLTHjZR+DQcG+F9Vm2nUTgttJouUUTTDZqKmYMazA3OChT04wml36Fuc8lBVNchk0UHMpKO1B5MzeAyTN4mb8yZbSqF1Lkfrm1iA7omv38EW5YvbbvwvShpj/XUjbkz5pJvFJxgpNQczxtovZjrtlJ22v5WdoLVdVunorSqadrt0u7X7VduZy/2X06I7y5zWVtxRoZXhYMpcrov7S5WUq9SVPCL0HRf0YMIWaGsWpB5zXuJnM7qeJkQNg7s1Jqa/ho3YwwS1BxtsJ4Cs4H5PLkV7ufL0ZEaoGPVJpWkQdzRWDfASePk+MJiWLfC9IUW5cMLzeMo1LEjyVDj9mrv/Bm12REaRLKCrIJkq8F7+WuLRiCd72uSHOihNEMPOKL90sYBj+3iMGGWE3NE/AjSnjqjfaPy7N35DIQdyVKaDveFyw+5lfRKvfwPAtmeCLTsPY+1+29Iek9KcT9fdF+2SWy34RxNZNnra+OhXwcHUL9ywZ2zKj/qcBuD/qvHtjDw+2eKpY/hPL5A7e9sErmoc72vNux5mhYdGdjwvyiPy93jvvHrj9SYNShwvBljSjR377ddmd0Wvu2p/ZeRvDIZcoQYWG8E4YajRNXGF2vAnQt1Arv7hNyuiThQvfQTI8TLY0uCVMBVL4ISO6IbgksNF6ApHmlH0DSCmWo21UBPZXw2nSx0DFw/W0eL2hpOTq6rZsYr/Ncl5UEXG9cwjawST/wSZK2DO2EnKEx2ZoJGdK96ohdnfio6BWK5U6shWvmmNV17YYpu6WSlrovrbCeaMiqZoZbwlYMUUpiHZN4AY7yTPtU3j1FoB45EOFDTBiwWecTzojVysMvZGVYHsAHMKVQwRyLhjDboUity/VrBxjJVqA4+WZTiLwglQGPeVqCoWNK4AI5VUZ7N345+V39rtD6L9gC0aeo8osIf/irSqQUKasMgc+cWa8I12DVC3QlBEciKhT9KpHJ8/opBEiu1VKsatPBwDjlw8cCT3SU4eP1N8MHEDvtaNOQjpIPSzWpmLEwbz1nUrhSviQhSUQdhSV4lBvB41tVBGaI2NtxYgE/xzA2RFdh6x4Fx6G1xhzrODXwl/WpiGcbCCiibZ+ngusAIlpABhvsn6ccM3jqsKUD4y3yYt8UL0jBbHRV7t/7Et8bkcUPXwAodNUgR+vLsklF8lGAawWlu2AQEZfrve5+Zv3OhkVCShMMWb165T3e1JWzr16Fii5HYB4zd1fj4ReiALglUuOT430C+zSvQoJcM1m3s5xGd0Z/YXmuDRdqJZv/Vk8fusCTnXy7V6sltWDA+iM54NtfEkJ8u4vnfwpERDg/G0KJT8AOO/Tiq6KEO08PUdexV4ee9EWAuq6aCtYaCoD8g3hPfyXZoY8Knf61wU/44E7ufQPPmYOVNs2Ubezr+MSD3lEiBM+9Dz0yWx8gvgPEd4D4DhDfAeI7QHwHiO8A8R0gvgPEd4D4DhDfAeI7QHwHiO8A8R0gvjGILynlHgD3PBhIf/irf5fYcnpjjDZp7d8hg3uh1g71QFBbaySjH7o3l2AtW8H+jbgljF2KIzg1R2cb1kMh7+djf7DaEsFL6/00DFgEJxI2kB6xXa2pvz+Y+rlM/cPB1M9l6r8fTP08pv7bIVc/n6kPufpZTB3AnEJjX2TAvXyH44xOk0fE6V3/y5ZmFM190bcrvrlleMWlbUdhz3H0AWm3bS52fnQNLf53f01d6uF7UykUOT7f7wjwFd/x+Wl8JbGxjwiHd52fNvSldLaVNTaiZMTWeYEoVNqags0r+29SWJtjRY03BLUK/bqmVmqnmzbrliK/suUNI7ZedMJ6qjMC1rAHhk3Iz9oQpnztuhawyUJnLUKSoWg+C82tZIAI7pbPI82wL33N3+j6hQEidei1Qrij0Bss4HMmJZJNhyPssT4NsE9oUjk+P32Aa6inp0h/2bYnYlHdPZfRo8n3E/8mVmnrSqb6F5X93urdzU46Yw+N2M/ZiB2ziYNbN60kEx6o893YdzFnpG+K+Iw4GzbRF9o6HHR3t2AW3hu53eLnP2swDZ19uM7omhkREtSHO8qFxf/zPkHc5wbfXMRM/JLc14k9Knz7bqjw1dDfacMhcwPNsPc7NNv4BOZFCwN+CgK8ju1C7QJ75xL+yUeYcZznULkHx14n+fj8/RXN6CI2hPuuvhk1bINnD9sEWeOlFQf4b3dUMrWq/ZFDw5L479+ISSWn
sidebar_class_name: "put api-method"
info_path: adminapi/admin-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Update deployment"}
>
</Heading>

<MethodEndpoint
  method={"put"}
  path={"/deployments/{deployment}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Update deployment. Invokes the endpoint and replaces the existing deployment metadata with the discovered information. This is a dangerous operation that should be used only when there are failing invocations on the deployment that cannot be resolved any other way. Sense checks are applied to test that the new deployment is sufficiently similar to the old one.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"deployment","in":"path","description":"Deployment identifier","required":true,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","required":["uri"],"properties":{"uri":{"title":"Uri","description":"Uri to use to discover/invoke the http deployment.","type":"string"},"additional_headers":{"title":"Additional headers","description":"Additional headers added to the discover/invoke requests to the deployment.","type":"object","additionalProperties":{"type":"string"},"nullable":true},"use_http_11":{"title":"Use http1.1","description":"If `true`, discovery will be attempted using a client that defaults to HTTP1.1 instead of a prior-knowledge HTTP2 client. HTTP2 may still be used for TLS servers that advertise HTTP2 support via ALPN. HTTP1.1 deployments will only work in request-response mode.","default":false,"type":"boolean"},"dry_run":{"title":"Dry-run mode","description":"If `true`, discovery will run but the deployment will not be registered. This is useful to see the impact of a new deployment before registering it.","default":false,"type":"boolean"}}},{"type":"object","required":["arn"],"properties":{"arn":{"title":"ARN","description":"ARN to use to discover/invoke the lambda deployment.","type":"string"},"assume_role_arn":{"title":"Assume role ARN","description":"Optional ARN of a role to assume when invoking the addressed Lambda, to support role chaining","type":"string","nullable":true},"additional_headers":{"title":"Additional headers","description":"Additional headers added to the discover/invoke requests to the deployment.","type":"object","additionalProperties":{"type":"string"},"nullable":true},"dry_run":{"title":"Dry-run mode","description":"If `true`, discovery will run but the deployment will not be registered. This is useful to see the impact of a new deployment before registering it.","default":false,"type":"boolean"}}}],"title":"UpdateDeploymentRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"","content":{"application/json":{"schema":{"anyOf":[{"title":"HttpDetailedDeploymentResponse","description":"Detailed deployment response for HTTP deployments","type":"object","required":["created_at","http_version","id","max_protocol_version","min_protocol_version","protocol_type","services","uri"],"properties":{"id":{"title":"Deployment ID","allOf":[{"type":"string","title":"String"}]},"uri":{"title":"Deployment URI","description":"URI used to invoke this service deployment.","type":"string"},"protocol_type":{"title":"Protocol Type","description":"Protocol type used to invoke this service deployment.","allOf":[{"type":"string","enum":["RequestResponse","BidiStream"],"title":"ProtocolType"}]},"http_version":{"title":"HTTP Version","description":"HTTP Version used to invoke this service deployment.","type":"string"},"additional_headers":{"title":"Additional headers","description":"Additional headers used to invoke this service deployment.","type":"object","additionalProperties":{"type":"string"}},"created_at":{"type":"string"},"min_protocol_version":{"type":"integer","format":"int32"},"max_protocol_version":{"type":"integer","format":"int32"},"services":{"title":"Services","description":"List of services exposed by this deployment.","type":"array","items":{"type":"object","required":["deployment_id","handlers","idempotency_retention","name","public","revision","ty"],"properties":{"name":{"title":"Name","description":"Fully qualified name of the service","type":"string"},"handlers":{"type":"array","items":{"type":"object","required":["input_description","name","output_description"],"properties":{"name":{"type":"string"},"ty":{"allOf":[{"type":"string","enum":["Exclusive","Shared","Workflow"],"title":"HandlerMetadataType"}],"nullable":true},"documentation":{"title":"Documentation","description":"Documentation of the handler, as propagated by the SDKs.","type":"string","nullable":true},"metadata":{"title":"Metadata","description":"Additional handler metadata, as propagated by the SDKs.","type":"object","additionalProperties":{"type":"string"}},"input_description":{"title":"Human readable input description","description":"If empty, no schema was provided by the user at discovery time.","type":"string"},"output_description":{"title":"Human readable output description","description":"If empty, no schema was provided by the user at discovery time.","type":"string"},"input_json_schema":{"title":"Input JSON Schema","description":"JSON Schema of the handler input","nullable":true},"output_json_schema":{"title":"Output JSON Schema","description":"JSON Schema of the handler output","nullable":true}},"title":"HandlerMetadata"}},"ty":{"type":"string","enum":["Service","VirtualObject","Workflow"],"title":"ServiceType"},"documentation":{"title":"Documentation","description":"Documentation of the service, as propagated by the SDKs.","type":"string","nullable":true},"metadata":{"title":"Metadata","description":"Additional service metadata, as propagated by the SDKs.","type":"object","additionalProperties":{"type":"string"}},"deployment_id":{"title":"Deployment Id","description":"Deployment exposing the latest revision of the service.","type":"string"},"revision":{"title":"Revision","description":"Latest revision of the service.","type":"integer","format":"uint32","minimum":0},"public":{"title":"Public","description":"If true, the service can be invoked through the ingress. If false, the service can be invoked only from another Restate service.","type":"boolean"},"idempotency_retention":{"title":"Idempotency retention","description":"The retention duration of idempotent requests for this service.","type":"string"},"workflow_completion_retention":{"title":"Workflow completion retention","description":"The retention duration of workflows. Only available on workflow services.","type":"string","nullable":true},"inactivity_timeout":{"title":"Inactivity timeout","description":"This timer guards against stalled service/handler invocations. Once it expires, Restate triggers a graceful termination by asking the service invocation to suspend (which preserves intermediate progress).\n\nThe 'abort timeout' is used to abort the invocation, in case it doesn't react to the request to suspend.\n\nCan be configured using the [`humantime`](https://docs.rs/humantime/latest/humantime/fn.parse_duration.html) format.\n\nThis overrides the default inactivity timeout set in invoker options.","type":"string","nullable":true},"abort_timeout":{"title":"Abort timeout","description":"This timer guards against stalled service/handler invocations that are supposed to terminate. The abort timeout is started after the 'inactivity timeout' has expired and the service/handler invocation has been asked to gracefully terminate. Once the timer expires, it will abort the service/handler invocation.\n\nThis timer potentially **interrupts** user code. If the user code needs longer to gracefully terminate, then this value needs to be set accordingly.\n\nCan be configured using the [`humantime`](https://docs.rs/humantime/latest/humantime/fn.parse_duration.html) format.\n\nThis overrides the default abort timeout set in invoker options.","type":"string","nullable":true}},"title":"ServiceMetadata"}}}},{"title":"LambdaDetailedDeploymentResponse","description":"Detailed deployment response for Lambda deployments","type":"object","required":["arn","created_at","id","max_protocol_version","min_protocol_version","services"],"properties":{"id":{"title":"Deployment ID","allOf":[{"type":"string","title":"String"}]},"arn":{"title":"Lambda ARN","description":"Lambda ARN used to invoke this service deployment.","allOf":[{"type":"string","format":"arn","title":"LambdaARN"}]},"assume_role_arn":{"title":"Assume role ARN","description":"Assume role ARN used to invoke this deployment. Check https://docs.restate.dev/category/aws-lambda for more details.","type":"string","nullable":true},"additional_headers":{"title":"Additional headers","description":"Additional headers used to invoke this service deployment.","type":"object","additionalProperties":{"type":"string"}},"created_at":{"type":"string"},"min_protocol_version":{"type":"integer","format":"int32"},"max_protocol_version":{"type":"integer","format":"int32"},"services":{"title":"Services","description":"List of services exposed by this deployment.","type":"array","items":{"type":"object","required":["deployment_id","handlers","idempotency_retention","name","public","revision","ty"],"properties":{"name":{"title":"Name","description":"Fully qualified name of the service","type":"string"},"handlers":{"type":"array","items":{"type":"object","required":["input_description","name","output_description"],"properties":{"name":{"type":"string"},"ty":{"allOf":[{"type":"string","enum":["Exclusive","Shared","Workflow"],"title":"HandlerMetadataType"}],"nullable":true},"documentation":{"title":"Documentation","description":"Documentation of the handler, as propagated by the SDKs.","type":"string","nullable":true},"metadata":{"title":"Metadata","description":"Additional handler metadata, as propagated by the SDKs.","type":"object","additionalProperties":{"type":"string"}},"input_description":{"title":"Human readable input description","description":"If empty, no schema was provided by the user at discovery time.","type":"string"},"output_description":{"title":"Human readable output description","description":"If empty, no schema was provided by the user at discovery time.","type":"string"},"input_json_schema":{"title":"Input JSON Schema","description":"JSON Schema of the handler input","nullable":true},"output_json_schema":{"title":"Output JSON Schema","description":"JSON Schema of the handler output","nullable":true}},"title":"HandlerMetadata"}},"ty":{"type":"string","enum":["Service","VirtualObject","Workflow"],"title":"ServiceType"},"documentation":{"title":"Documentation","description":"Documentation of the service, as propagated by the SDKs.","type":"string","nullable":true},"metadata":{"title":"Metadata","description":"Additional service metadata, as propagated by the SDKs.","type":"object","additionalProperties":{"type":"string"}},"deployment_id":{"title":"Deployment Id","description":"Deployment exposing the latest revision of the service.","type":"string"},"revision":{"title":"Revision","description":"Latest revision of the service.","type":"integer","format":"uint32","minimum":0},"public":{"title":"Public","description":"If true, the service can be invoked through the ingress. If false, the service can be invoked only from another Restate service.","type":"boolean"},"idempotency_retention":{"title":"Idempotency retention","description":"The retention duration of idempotent requests for this service.","type":"string"},"workflow_completion_retention":{"title":"Workflow completion retention","description":"The retention duration of workflows. Only available on workflow services.","type":"string","nullable":true},"inactivity_timeout":{"title":"Inactivity timeout","description":"This timer guards against stalled service/handler invocations. Once it expires, Restate triggers a graceful termination by asking the service invocation to suspend (which preserves intermediate progress).\n\nThe 'abort timeout' is used to abort the invocation, in case it doesn't react to the request to suspend.\n\nCan be configured using the [`humantime`](https://docs.rs/humantime/latest/humantime/fn.parse_duration.html) format.\n\nThis overrides the default inactivity timeout set in invoker options.","type":"string","nullable":true},"abort_timeout":{"title":"Abort timeout","description":"This timer guards against stalled service/handler invocations that are supposed to terminate. The abort timeout is started after the 'inactivity timeout' has expired and the service/handler invocation has been asked to gracefully terminate. Once the timer expires, it will abort the service/handler invocation.\n\nThis timer potentially **interrupts** user code. If the user code needs longer to gracefully terminate, then this value needs to be set accordingly.\n\nCan be configured using the [`humantime`](https://docs.rs/humantime/latest/humantime/fn.parse_duration.html) format.\n\nThis overrides the default abort timeout set in invoker options.","type":"string","nullable":true}},"title":"ServiceMetadata"}}}}],"title":"DetailedDeploymentResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}}}}},"403":{"description":"","content":{"application/json":{"schema":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}}}}},"404":{"description":"","content":{"application/json":{"schema":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}}}}},"409":{"description":"","content":{"application/json":{"schema":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}}}}},"500":{"description":"","content":{"application/json":{"schema":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}}}}},"503":{"description":"","content":{"application/json":{"schema":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}}}}}}}
>
  
</StatusCodes>


      