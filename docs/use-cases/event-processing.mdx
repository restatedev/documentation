---
title: "Event Processing"
sidebar_position: 3
description: "Write event processing apps with Restate"
hide_table_of_contents: true
hide_title: true
---

import FeatureWidget from "../../src/components/FeatureWidget"
import FeatureSpotlight from "../../src/components/FeatureSpotlight"
import TwoColumnText from "../../src/components/TwoColumnText";
import ExampleWidget from "../../src/components/ExampleWidget"
import FeatureList from "../../src/components/FeatureList"
import SpotlightCard from "../../src/components/SpotlightCard"
import Tabs from "@theme/Tabs"
import TabItem from "@theme/TabItem"
import {Scrollycoding} from "../../src/components/code/scrollycoding";
import Admonition from "@theme/Admonition";

<div className={"row"}>
    <div className={"col col--6 col-lg-6 col-md-12"}>
        <h1 className={"padding-top--lg text--left"}>Event Processing</h1>
        <h1 className={"use-case-subtitle text--left"}>Lightweight, transactional event processing.</h1>
        <p className={"use-case-description padding-bottom--lg text--left"}>Process Kafka events with flexible flows of transactional steps.<br/>
            Restate takes care of the event plumbing and pushes events to your handler.</p>
    </div>
    <div className={"col col--6 col-lg-6 col-md-12"}>
        <img src={"/img/use_cases/use-case-event-driven-light.svg"} alt={"Event Processing"} className={"use-case-img"}/>
    </div>
</div>

<hr/>
<p className={"padding-bottom--lg"}></p>

<FeatureList className={"padding-bottom--lg"} features={[
    {
        title: 'Lightweight, resilient functions',
        iconPath: '/img/code-icon.svg',
        description: "On failures, Restate takes care of retries and recovers the progress of your executions. Your code runs like a normal Java/Python/... application in a Docker container or on serverless infrastructure.",
    },
    {
        title: 'From complex, long-running workflows to fast ETL tasks',
        iconPath: '/img/use_cases/trident.svg',
        description: "Restate parallelizes processing based on the key (instead of on partition). Long-running functions do not block processing of other keys. Functions can implement loops and timers, or any complex logic.    ",
    },
    {
        title: 'No managing Kafka consumers',
        iconPath: '/img/use_cases/forward-email.svg',
        description: "Restate pushes events to your handlers. No need to implement consumers, manage subscriptions/offsets, etc. ",
    },
]}/>

<p className={"padding-bottom--lg"}></p>

## Event processing with Restate

Connect functions to Kafka topics.
Restate pushes the events to your function.

<Scrollycoding>

    ### !!steps Resilient business logic and durable side effects

    Restate persists the progress of execution and retries it from the point where it crashed.
    Whenever you do a side effect in your code (`run` block), Restate persists the result and replays it after a crash.
    This lets you write workflow-like code that is resilient to failures.

    [Learn more](https://docs.restate.dev/concepts/durable_execution)

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventtransactions/user_feed.ts
    CODE_LOAD::ts/src/use_cases/event_processing/transactional_event_processing.ts?3
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventtransactions/UserFeed.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventtransactions/UserFeed.java?3
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/UserFeed.kt?3
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventtransactions/userfeed.go
    CODE_LOAD::go/usecases/eventprocessing/eventtransactions/userfeed.go?3
    ```

    ```python !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventtransactions/user_feed.py
    CODE_LOAD::python/src/use_cases/event_processing/user_feed.py?3
    ```

    ### !!steps No managing Kafka consumers
    You can hook up functions to Kafka topics and let Restate manage the consumers: polling for records, committing offsets, recovering...

    [Learn more](/guides/kafka-quickstart)

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventtransactions/user_feed.ts
    CODE_LOAD::ts/src/use_cases/event_processing/transactional_event_processing.ts?1
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventtransactions/UserFeed.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventtransactions/UserFeed.java?1
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/UserFeed.kt?1
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventtransactions/userfeed.go
    CODE_LOAD::go/usecases/eventprocessing/eventtransactions/userfeed.go?1
    ```

    ```python !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventtransactions/user_feed.py
    CODE_LOAD::python/src/use_cases/event_processing/user_feed.py?1
    ```


    ### !!steps Scale with serverless functions

    You can deploy your functions on serverless platforms, let Restate push events to them, and scale them up and down as needed.

    [Learn more](https://restate.dev/blog/we-replaced-400-lines-of-stepfunctions-asl-with-40-lines-of-typescript-by-making-lambdas-suspendable/)

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventtransactions/user_feed.ts
    CODE_LOAD::ts/src/use_cases/event_processing/transactional_event_processing.ts?6
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventtransactions/UserFeed.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventtransactions/UserFeed.java?6
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/UserFeed.kt?6
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventtransactions/userfeed.go
    CODE_LOAD::go/usecases/eventprocessing/eventtransactions/userfeed.go?6
    ```

    ```python !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventtransactions/user_feed.py
    CODE_LOAD::python/src/use_cases/event_processing/user_feed.py?6
    ```

    ### !!steps Schedule events or postpone processing

    Flexibly postpone processing of events until later.
    Or schedule async tasks for now or for later, based on an event.
    Restate tracks the timers and triggers execution when needed.

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventtransactions/user_feed.ts
    CODE_LOAD::ts/src/use_cases/event_processing/transactional_event_processing.ts?2
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventtransactions/UserFeed.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventtransactions/UserFeed.java?2
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/UserFeed.kt?2
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventtransactions/userfeed.go
    CODE_LOAD::go/usecases/eventprocessing/eventtransactions/userfeed.go?2
    ```

    ```python !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventtransactions/user_feed.py
    CODE_LOAD::python/src/use_cases/event_processing/user_feed.py?2
    ```


    ### !!steps Flexible control flow

    As opposed to many stream processing systems, Restate does not put any restrictions on the control flow (e.g. DAG).
    Each event crafts its own path through the code
    and builds up its own recovery log.

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventtransactions/user_feed.ts
    CODE_LOAD::ts/src/use_cases/event_processing/transactional_event_processing.ts?4
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventtransactions/UserFeed.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventtransactions/UserFeed.java?4
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/UserFeed.kt?4
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventtransactions/userfeed.go
    CODE_LOAD::go/usecases/eventprocessing/eventtransactions/userfeed.go?4
    ```

    ```python !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventtransactions/user_feed.py
    CODE_LOAD::python/src/use_cases/event_processing/user_feed.py?4
    ```

    ### !!steps Queue per key
    Events get sent to objects based on the Kafka key.
    For each key, Restate ensures that events are processed sequentially and in order.
    Slow events on other keys do not block processing.

    In the example, slow moderation checks do not block posts for other users.

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventtransactions/user_feed.ts
    CODE_LOAD::ts/src/use_cases/event_processing/transactional_event_processing.ts?5
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventtransactions/UserFeed.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventtransactions/UserFeed.java?5
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/UserFeed.kt?5
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventtransactions/userfeed.go
    CODE_LOAD::go/usecases/eventprocessing/eventtransactions/userfeed.go?5
    ```

    ```python !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventtransactions/user_feed.py
    CODE_LOAD::python/src/use_cases/event_processing/user_feed.py?5
    ```

</Scrollycoding>

<SpotlightCard>
    <TwoColumnText features={[
        {
            title: 'LOW-LATENCY',
            description: <>Restateâ€™s event-driven foundation lets you process events at high speed. Restate keeps a queue per key and pushes events to your functions to process them in parallel as fast as possible. <br/><br/>  <a href={"https://restate.dev/blog/the-anatomy-of-a-durable-execution-stack-from-first-principles/#some-performance-numbers"}>Learn more</a></>,
        },
        {
            title: 'DURABLE EXECUTION',
            description: <>Restate manages the complexities of reading from Kafka, processes each event exactly once, and handles retries and recovery of your event handlers to the exact point before the crash. <br/><br/>  <a href={"https://restate.dev/what-is-durable-execution/"}>Learn more</a></>,
        },
    ]}/>
</SpotlightCard>

## Stateful event processing with Restate

Implement stateful event handlers with Restate.

<Scrollycoding className={"workflows-scroller"}>

    ### !!steps K/V State and Event Enrichment
    Store state in Restate and access or expose it from other handlers.
    Restate guarantees that it is consistent and persistent.
    The state gets delivered together with the request, so you operate on local state.

    [Learn more](/concepts/services#virtual-objects)

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventenrichment/package_tracker.ts
    CODE_LOAD::ts/src/use_cases/event_processing/event_enrichment.ts?1
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventenrichment/PackageTracker.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventenrichment/PackageTracker.java?1
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/PackageTracker.kt?1
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventenrichment/packagetracker.go
    CODE_LOAD::go/usecases/eventprocessing/eventenrichment/packagetracker.go?1
    ```

    ```py !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventenrichment/package_tracker.py
    CODE_LOAD::python/src/use_cases/event_processing/package_tracker.py?1
    ```

    ### !!steps Agents, actors and state machines

    Implement agents, actors, digital twins, and state machines that act on Kafka events.

    Restate gives you simple concurrency guarantees and makes them fully resilient and consistent out of the box.


    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventenrichment/package_tracker.ts
    CODE_LOAD::ts/src/use_cases/event_processing/event_enrichment.ts?2
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventenrichment/PackageTracker.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventenrichment/PackageTracker.java?2
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/PackageTracker.kt?2
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventenrichment/packagetracker.go
    CODE_LOAD::go/usecases/eventprocessing/eventenrichment/packagetracker.go?2
    ```

    ```py !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventenrichment/package_tracker.py
    CODE_LOAD::python/src/use_cases/event_processing/package_tracker.py?2
    ```


    ### !!steps Combine Kafka and RPC

    Functions can be called over RPC or Kafka without changing the code.
    In the example, the registration can come over Kafka, while the location updates come over Kafka, and a dashboard can call the get info handler.

    ```ts !!tabs TypeScript https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/src/eventenrichment/package_tracker.ts
    CODE_LOAD::ts/src/use_cases/event_processing/event_enrichment.ts?3
    ```

    ```java !!tabs Java https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/src/main/java/my/example/eventenrichment/PackageTracker.java
    CODE_LOAD::java/src/main/java/usecases/eventprocessing/eventenrichment/PackageTracker.java?3
    ```

    ```kotlin !!tabs Kotlin
    CODE_LOAD::kotlin/src/main/kotlin/usecases/eventprocessing/PackageTracker.kt?3
    ```

    ```go !!tabs Go https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/src/eventenrichment/packagetracker.go
    CODE_LOAD::go/usecases/eventprocessing/eventenrichment/packagetracker.go?3
    ```

    ```py !!tabs Python https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/src/eventenrichment/package_tracker.py
    CODE_LOAD::python/src/use_cases/event_processing/package_tracker.py?3
    ```

</Scrollycoding>

<SpotlightCard>
    <FeatureSpotlight
        title={"Event handlers as regular, lightweight functions"}
        description={<p>Let Restate subscribe to a Kafka topic and push events to your functions. <br/>
            Your functions run as normal services in your existing infra.
        </p>}
        imgPath={"/img/use_cases/event_processing-white.svg"}
    />
</SpotlightCard>

## What you can build with Event Processing and Restate

<ExampleWidget itemsPerRow={3} features={[
    {
        title: 'Event-driven state machines',
        description: "A delivery service that responds to location updates arriving over Kafka. The order gets updated accordingly. ",
        links: [
            {url: "https://github.com/restatedev/examples/tree/main/java/end-to-end-applications/food-ordering#the-delivery-workflow", icon: "/img/java.svg"},
            {url: "https://github.com/restatedev/examples/tree/main/kotlin/end-to-end-applications/food-ordering#the-delivery-workflow", icon: "/img/kotlin.svg"},
            {url: "https://github.com/restatedev/examples/tree/main/typescript/end-to-end-applications/food-ordering#the-delivery-workflow", icon: "/img/typescript.svg"},
        ],
    },
    {
        title: 'Stateful actors',
        description: "A subway fare calculator with stateful actors that combine events, schedule follow-up tasks, and execute durable side effects like payments.",
        links: [
            {url: "https://github.com/restatedev/examples/tree/main/java/end-to-end-applications/subway-fare-calculator", icon: "/img/java.svg"},
        ],
    },
    {
        title: 'Webhook event processing',
        description: "Point your webhook to Restate and let it process the events. Restate takes care of retries and recovery.",
        links: [
            {url: "/guides/durable-webhooks", icon: "/img/arrow-right.svg"},
        ],
    },
    {
        title: 'Restate as (delayed) message queue',
        description: "Send messages to Restate and define when they should get executed. When the time comes, Restate take care of the scheduling and execution.",
        links: [
            {url: "https://github.com/restatedev/examples/blob/main/java/patterns-use-cases/README.md#delayed-message-queue", icon: "/img/java.svg"},
            {url: "https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/README.md#delayed-message-queue", icon: "/img/typescript.svg"},
            {url: "https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/README.md#delayed-message-queue", icon: "/img/go.svg"},
            {url: "https://github.com/restatedev/examples/blob/main/python/patterns-use-cases/README.md#delayed-message-queue", icon: "/img/python.svg"},
        ],
    },
    {
        title: 'Conditional, reminder scheduling',
        description: "Scheduling reminders in a loop until another function has been called. An example of flexible control flow and scheduling.",
        links: [
            {url: "https://github.com/restatedev/examples/blob/main/typescript/patterns-use-cases/README.md#scheduling-tasks", icon: "/img/typescript.svg"},
            {url: "https://github.com/restatedev/examples/blob/main/go/patterns-use-cases/README.md#scheduling-tasks", icon: "/img/go.svg"},
        ],
    },
    {
        title: 'Wondering about a specific use case?',
        description: "Letâ€™s brainstorm together on Discord or Slack.",
        links: [
            {url: "https://discord.gg/skW3AZ6uGd", icon: "/img/discord-icon.svg"},
            {url: "https://join.slack.com/t/restatecommunity/shared_invite/zt-2v9gl005c-WBpr167o5XJZI1l7HWKImA", icon: "/img/slack.svg"}
        ]
    },
]}>
</ExampleWidget>

<Admonition type="note" title={"Didn't see your use case?"}>
ðŸ’¡ You can connect any handler to a Kafka topic, so have a look at the other use case pages for more inspiration.
</Admonition>

## Developer Resources

<FeatureWidget features={[
    {
        title: 'Docs',
        description: (
            "Read the docs to learn more."
        ),
        ts: "/invoke/kafka?sdk=ts",
        java: "/invoke/kafka?sdk=java",
        go: "/invoke/kafka?sdk=go",
        python: "/invoke/kafka?sdk=python",
    },
    {
        title: 'Kafka + Restate Quickstart',
        description: "Get started with your first Restate Kafka handler.",
        links: [
            {url: "/guides/kafka-quickstart", icon: "/img/arrow-right.svg"},
        ]
    },
    {
        title: 'Need help?',
        description: "Join the Restate Discord or Slack communities",
        links: [
            {url: "https://discord.gg/skW3AZ6uGd", icon: "/img/discord-icon.svg"},
            {url: "https://join.slack.com/t/restatecommunity/shared_invite/zt-2v9gl005c-WBpr167o5XJZI1l7HWKImA", icon: "/img/slack.svg"}
        ]
    }
]}/>
