{"openapi":"3.0.0","info":{"title":"Meta REST Operational API","version":"0.1.0"},"paths":{"/services/{service}":{"get":{"tags":["service"],"summary":"Get service","description":"Get a registered service.","operationId":"get_service","parameters":[{"name":"service","in":"path","description":"Fully qualified service name.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetServiceResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/endpoint/discover":{"post":{"tags":["service_endpoint"],"summary":"Discover service endpoint","description":"Discover service endpoint and register it in the meta information storage. If the service endpoint is already registered, it will be re-discovered and will override the previous stored metadata.","operationId":"discover_service_endpoint","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterServiceEndpointRequest"}}},"required":true},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterServiceEndpointResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/services/{service}/methods/":{"get":{"tags":["service_method"],"summary":"List service methods","description":"List all the methods of the given service.","operationId":"list_service_methods","parameters":[{"name":"service","in":"path","description":"Fully qualified service name.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListServiceMethodsResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/invocations":{"delete":{"tags":["invocation"],"summary":"Kill an invocation","description":"Kill the given invocation. When killing, consistency is not guaranteed for service instance state, in-flight invocation to other services, etc. Future releases will support graceful invocation cancellation.","operationId":"cancel_invocation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelInvocationRequest"}}},"required":true},"responses":{"200":{"description":""},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/services/discover":{"post":{"tags":["service_endpoint"],"summary":"Discover service endpoint","description":"Discover service endpoint and register it in the meta information storage. If the service endpoint is already registered, it will be re-discovered and will override the previous stored metadata.","operationId":"discover_service_endpoint","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterServiceEndpointRequest"}}},"required":true},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterServiceEndpointResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/services/{service}/methods/{method}":{"get":{"tags":["service_method"],"summary":"Get service method","description":"Get the method of a service","operationId":"get_service_method","parameters":[{"name":"service","in":"path","description":"Fully qualified service name.","required":true,"schema":{"type":"string"}},{"name":"method","in":"path","description":"Method name.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetServiceMethodResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/services/":{"get":{"tags":["service"],"summary":"List services","description":"List all registered services.","operationId":"list_services","responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListServicesResponse"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}},"503":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDescriptionResponse"}}}}}}},"/openapi":{"get":{"tags":["openapi"],"summary":"OpenAPI specification","externalDocs":{"url":"https://swagger.io/specification/"},"operationId":"openapi_spec","responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}}},"components":{"schemas":{"GetServiceResponse":{"type":"object","required":["endpoint_metadata","service_name"],"properties":{"service_name":{"type":"string"},"endpoint_metadata":{"$ref":"#/components/schemas/EndpointMetadata"}}},"EndpointMetadata":{"type":"object","required":["address","delivery_options","protocol_type"],"properties":{"address":{"type":"string"},"protocol_type":{"$ref":"#/components/schemas/ProtocolType"},"delivery_options":{"$ref":"#/components/schemas/DeliveryOptions"}}},"ProtocolType":{"type":"string","enum":["RequestResponse","BidiStream"]},"DeliveryOptions":{"type":"object","required":["additional_headers"],"properties":{"additional_headers":{"type":"object","additionalProperties":{"type":"string"}},"retry_policy":{"allOf":[{"$ref":"#/components/schemas/RetryPolicy"}],"nullable":true}}},"RetryPolicy":{"title":"Retry policy","description":"Definition of a retry policy","oneOf":[{"title":"None","description":"No retries strategy.","type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["None"]}}},{"title":"Fixed delay","description":"Retry with a fixed delay strategy.","type":"object","required":["interval","max_attempts","type"],"properties":{"type":{"type":"string","enum":["FixedDelay"]},"interval":{"title":"Interval","description":"Interval between retries.\n\nCan be configured using the [`humantime`](https://docs.rs/humantime/latest/humantime/fn.parse_duration.html) format.","type":"string"},"max_attempts":{"title":"Max attempts","description":"Number of maximum attempts before giving up.","type":"integer","format":"uint","minimum":0.0}}},{"title":"Exponential","description":"Retry with an exponential strategy. The next retry is computed as `min(last_retry_interval * factor, max_interval)`.","type":"object","required":["factor","initial_interval","max_attempts","type"],"properties":{"type":{"type":"string","enum":["Exponential"]},"initial_interval":{"title":"Initial Interval","description":"Initial interval for the first retry attempt.\n\nCan be configured using the [`humantime`](https://docs.rs/humantime/latest/humantime/fn.parse_duration.html) format.","type":"string"},"factor":{"title":"Factor","description":"The factor to use to compute the next retry attempt.","type":"number","format":"float"},"max_attempts":{"title":"Max attempts","description":"Number of maximum attempts before giving up.","type":"integer","format":"uint","minimum":0.0},"max_interval":{"title":"Max interval","description":"Maximum interval between retries.","type":"string","nullable":true}}}]},"ErrorDescriptionResponse":{"title":"Error description response","description":"Error details of the response","type":"object","required":["message"],"properties":{"message":{"type":"string"},"restate_code":{"title":"Restate code","description":"Restate error code describing this error","type":"string","nullable":true}}},"RegisterServiceEndpointRequest":{"type":"object","required":["uri"],"properties":{"uri":{"title":"Uri","description":"Uri to use to discover/invoke the service endpoint.","type":"string"},"additional_headers":{"title":"Additional headers","description":"Additional headers added to the discover/invoke requests to the service endpoint.","type":"object","additionalProperties":{"type":"string"},"nullable":true},"retry_policy":{"title":"Retry policy","description":"Custom retry policy to use when executing invoke requests to the service endpoint. If not set, the one configured in the worker will be used as default.","allOf":[{"$ref":"#/components/schemas/RetryPolicy"}],"nullable":true}}},"RegisterServiceEndpointResponse":{"type":"object","required":["services"],"properties":{"services":{"type":"array","items":{"type":"string"}}}},"ListServiceMethodsResponse":{"type":"object","required":["methods"],"properties":{"methods":{"type":"array","items":{"$ref":"#/components/schemas/GetServiceMethodResponse"}}}},"GetServiceMethodResponse":{"type":"object","required":["method_name","service_name"],"properties":{"service_name":{"type":"string"},"method_name":{"type":"string"}}},"CancelInvocationRequest":{"type":"object","required":["sid"],"properties":{"sid":{"title":"Target identifier","description":"Identifier of the service invocation to cancel/kill.","allOf":[{"$ref":"#/components/schemas/ServiceInvocationId"}]}}},"ServiceInvocationId":{"title":"Service invocation id","description":"Identifier for a service invocation.","anyOf":[{"title":"Token representation","description":"Token representation of the service invocation identifier. This is the same representation used by the Restate CLI SQL interface.","type":"string"}]},"ListServicesResponse":{"type":"object","required":["endpoints"],"properties":{"endpoints":{"type":"array","items":{"$ref":"#/components/schemas/GetServiceResponse"}}}}}}}
